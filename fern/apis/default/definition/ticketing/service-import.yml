# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  simpleTypes: ./types-simple.yml
  globalApiTypes: ./../global-api-types.yml

service:
  display-name: Import
  auth: true
  base-path: /ticket
  
  endpoints:
    importTickets:
      audiences:
        - internal
      docs: This service is used to import tickets generated by a 3rd party system into the ticketing system.
      display-name: Import Tickets
      method: POST
      path: /import
      request:
        name: importTicketBatch
        body: ImportTicketBatch
      response: 
        type: ImportTicketBatchResponse
      examples:
        - name: Simple
          docs: Simple example of importing a batch of tickets.
          path-parameters:
            tenant: $globalApiTypes.tenant.Exampletenant
            environment: $globalApiTypes.environment.ExampleenvironmentProduction
            company: $globalApiTypes.Company.ExampleCompanyCronus
          request: $ImportTicketBatch.ExampleImportTicketBatch
          response:
            body: $ImportTicketBatchResponse.ExampleImportTicketBatchResponse


types:
  ## Complex Types
  ImportTicketBatch:
    docs: 
      Represents a batch of tickets to be imported into the ticketing system. This includes a list of orders that contain ticket details.
    properties:
      ticketBatch: list<TicketBatch>
    examples:
      - name: ExampleImportTicketBatch
        value: 
          ticketBatch: 
            - $TicketBatch.ExampleTicketBatch

  TicketBatch:
    docs: 
      Represents one order containing tickets. It includes details such as order number, total amounts, and the list of tickets.
    properties:
      orderNumber: OrderNumber
      totalAmount: TotalAmount
      totalAmountInclVat: TotalAmountInclVat
      totalDiscountAmountInclVat: TotalDiscountAmountInclVat
      totalAmountLcyInclVat: TotalAmountLcyInclVat
      currencyCode: CurrencyCode
      salesDate: SalesDate
      paymentReference: optional<simpleTypes.PaymentReference>
      tickets: list<Ticket>
    examples:
      - name:  ExampleTicketBatch
        value: 
          orderNumber: $OrderNumber.ExampleOrderNumber
          totalAmount: $TotalAmount.ExampleTotalAmount
          totalAmountInclVat: $TotalAmountInclVat.ExampleTotalAmountInclVat
          totalDiscountAmountInclVat: $TotalDiscountAmountInclVat.ExampleTotalDiscountAmountInclVat
          totalAmountLcyInclVat: $TotalAmountLcyInclVat.ExampleTotalAmountLcyInclVat
          currencyCode: $CurrencyCode.ExampleCurrencyCode
          salesDate: $SalesDate.ExampleSalesDate
          paymentReference: $simpleTypes.PaymentReference.ExamplePaymentReference
          tickets: 
            - $Ticket.ExampleTicket

  Ticket:
    docs: 
      Represents a single ticket within an order. It includes details such as order line number, description, amounts, expected visit date and time, and other relevant information.
    properties:
      orderLineNumber: optional<OrderLineNumber>
      itemReferenceNumber: ItemReferenceNumber
      description: optional<TicketDescription>
      preAssignedTicketNumber: PreAssignedTicketNumber
      amount: Amount
      amountInclVat: AmountInclVat
      discountAmountInclVat: DiscountAmountInclVat
      amountLcyInclVat: AmountLcyInclVat
      expectedVisitDate: ExpectedVisitDate
      expectedVisitTime: ExpectedVisitTime
      ticketHolder: TicketHolderImport
    examples:
      - name: ExampleTicket
        value: 
          orderLineNumber: $OrderLineNumber.ExampleOrderLineNumber
          description: $TicketDescription.ExampleTicketDescription
          amountInclVat: $AmountInclVat.ExampleAmountInclVat
          discountAmountInclVat: $DiscountAmountInclVat.ExampleDiscountAmountInclVat
          amountLcyInclVat: $AmountLcyInclVat.ExampleAmountLcyInclVat
          preAssignedTicketNumber: $PreAssignedTicketNumber.ExamplePreAssignedTicketNumber
          expectedVisitDate: $ExpectedVisitDate.ExampleExpectedVisitDate
          expectedVisitTime: $ExpectedVisitTime.ExampleExpectedVisitTime
          itemReferenceNumber: $ItemReferenceNumber.ExampleItemReferenceNumber
          amount: $Amount.ExampleAmount
          ticketHolder: $TicketHolderImport.ExampleTicketHolder
  
  TicketHolderImport: 
    docs: 
      Represents the ticket holder's information, including name, email and member number
    properties:
      name: optional<Name>
      eMail: optional<EMail>
      languageCode: optional<LanguageCode>
      memberNumber: optional<simpleTypes.MemberNumber>
    examples:
      - name: ExampleTicketHolder
        value: 
          name: $Name.ExampleName
          eMail: $EMail.ExampleEMail
          memberNumber: $simpleTypes.MemberNumber.ExampleMemberNumber
          languageCode: $LanguageCode.ExampleENU

  ImportTicketBatchResponse:
    docs: 
      Represents the response returned after importing a batch of tickets. Includes details about the import job, status, and imported orders.
    properties:
      id: Id
      jobId: JobId
      numberOfTickets: integer
      success: Success
      responseMessage: ResponseMessage
      durationMs: DurationMs
      importedBy: ImportedBy
      orders: list<ImportedOrder>
    examples:
      - name: ExampleImportTicketBatchResponse
        value:
          id: $Id.ExampleId
          jobId: $JobId.ExampleJobId
          numberOfTickets: 1
          success: $Success.ExampleSuccess
          responseMessage: $ResponseMessage.ExampleResponseMessage
          durationMs: $DurationMs.ExampleDurationMs
          importedBy: $ImportedBy.ExampleImportedBy
          orders:
            - $ImportedOrder.ExampleImportedOrder

  ImportedOrder:
    docs:
      Represents an imported order in the import ticket batch response.
    properties:
      id: Id
      orderNumber: OrderNumber
      orderDate: SalesDate
      reservationToken: ReservationToken
    examples:
      - name: ExampleImportedOrder
        value:
          id: $Id.ExampleId
          orderNumber: $OrderNumber.ExampleOrderNumber
          orderDate: $SalesDate.ExampleSalesDate
          reservationToken: $ReservationToken.ExampleReservationToken


  ## Simple Types
  Id:
    type: string
    docs: Unique identifier for the import ticket batch response.
    examples:
      - name: ExampleId
        value: "7fb876d7-5341-f011-941c-d551256b4c00"

  JobId:
    type: string
    docs: Unique job identifier for the import operation.
    examples:
      - name: ExampleJobId
        value: "C7E61084421941889580C5B43B581C13"

  Success:
    type: boolean
    docs: Indicates whether the import was successful.
    examples:
      - name: ExampleSuccess
        value: true

  ResponseMessage:
    type: string
    docs: Failure message or blank.
    examples:
      - name: ExampleResponseMessage
        value: ""

  DurationMs:
    type: double
    docs: Duration of the import operation in milliseconds.
    examples:
      - name: ExampleDurationMs
        value: 185.0

  ImportedBy:
    type: string
    docs: Identifier of the user who performed the import.
    examples:
      - name: ExampleImportedBy
        value: "NP624484"

  ReservationToken:
    type: string
    docs: Token used for the reservation of the imported tickets.
    examples:
      - name: ExampleReservationToken
        value: "IMP8FF952EF0A1A4BA38E1D96BE490DCDA3"

  OrderNumber:
    type: string
    docs: Unique identifier for the order within the ticket batch.
    examples:
      - name: ExampleOrderNumber
        value: "ORD123456"

  TotalAmount:
    type: double
    docs: Total amount for the order, excluding VAT.
    examples:
      - name: ExampleTotalAmount
        value: 100.0

  TotalAmountInclVat:
    type: double
    docs: Total amount for the order, including VAT.
    examples:
      - name: ExampleTotalAmountInclVat
        value: 125.0

  TotalDiscountAmountInclVat:
    type: double
    docs: Total discount amount for the order, including VAT.
    examples:
      - name: ExampleTotalDiscountAmountInclVat
        value: 10.0

  TotalAmountLcyInclVat:
    type: double
    docs: Total amount in local currency, including VAT.
    examples:
      - name: ExampleTotalAmountLcyInclVat
        value: 125.0

  CurrencyCode:
    type: string
    docs: Currency code used for the order.
    examples:
      - name: ExampleCurrencyCode
        value: "USD"

  SalesDate:
    type: date
    docs: Date when the sale was made.
    examples:
      - name: ExampleSalesDate
        value: "2024-06-01"

  Name:
    type: string
    docs: Name of the customer placing the order.
    examples:
      - name: ExampleName
        value: "John Doe"

  EMail:
    type: string
    docs: Email address of the customer.
    examples:
      - name: ExampleEMail
        value: "john.doe@example.com"

  LanguageCode:
    type: string
    docs: The language code of the customer.
    examples:
      - name: ExampleENU
        value: "ENU"
      - name: ExampleDAN
        value: "DAN"

  MembershipNumber:
    type: string
    docs: Membership number of the ticket holder, if applicable.
    examples:
      - name: ExampleMembershipNumber
        value: "MEM123456"

  OrderLineNumber:
    type: integer
    docs: Line number of the ticket within the order.
    examples:
      - name: ExampleOrderLineNumber
        value: 1

  TicketDescription:
    type: string
    docs: Description of the ticket.
    examples:
      - name: ExampleTicketDescription
        value: "Adult Admission"

  AmountInclVat:
    type: double
    docs: Amount for the ticket, including VAT.
    examples:
      - name: ExampleAmountInclVat
        value: 25.0

  DiscountAmountInclVat:
    type: double
    docs: Discount amount for the ticket, including VAT.
    examples:
      - name: ExampleDiscountAmountInclVat
        value: 2.5

  AmountLcyInclVat:
    type: double
    docs: Amount in local currency, including VAT.
    examples:
      - name: ExampleAmountLcyInclVat
        value: 25.0

  PreAssignedTicketNumber:
    type: string
    docs: Pre-assigned number for the ticket.
    examples:
      - name: ExamplePreAssignedTicketNumber
        value: "TICKET123"

  ExpectedVisitDate:
    type: date
    docs: Expected date of visit for the ticket.
    examples:
      - name: ExampleExpectedVisitDate
        value: "2024-07-01"

  ExpectedVisitTime:
    type: string
    docs: Expected time of visit for the ticket.
    examples:
      - name: ExampleExpectedVisitTime
        value: "14:00"

  ItemReferenceNumber:
    type: string
    docs: Reference number for the item associated with the ticket.
    examples:
      - name: ExampleItemReferenceNumber
        value: "ITEM123"

  Amount:
    type: double
    docs: Amount for the ticket, excluding VAT.
    examples:
      - name: ExampleAmount
        value: 20.0

