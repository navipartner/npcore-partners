trigger: none

schedules:
  - cron: "0 22 * * *" #UTC TIME! mm HH DD MM DW
    displayName: Daily after-midnight AppSource Validation build
    branches:
      include:
      - master

resources:
  repositories:
  - repository: scriptsRepo
    type: git
    name: 'NpCore/NpDevOps'

pool:
  name: NP Core Pipelines
  demands: 
  - docker
  # Now only 2019 is available but in the future it will be every newer version.
  # Then we will probably remove this requirement as it will alwyas TRUE.
  - Agent.OS -equals Windows_NT
  - Agent.OSVersion -equals 10.0.17763

stages:
- template: /YAML/ZAL Build Definitions/AppSourceValidationBuild.yml@scriptsRepo
  parameters:
    pool: NP Core Pipelines
    containerDefinitions:
    - BC1905_CLOUD
    - vNext_CLOUD